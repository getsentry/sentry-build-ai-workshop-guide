---
title: Fixing Academy Course Search
description: Learn how to use Sentry's Seer AI and MCP Server to automatically analyze and fix course search issues
---

import { Steps } from '@astrojs/starlight/components';
import ScaledImage from '../../components/ScaledImage.astro';

Now that we're able to login, naturally the next thing we'd want to do is be able to search for courses that we can enroll in, right?

Well, clearly not - because its broken!

<ScaledImage
  src="/assets/img/broken-search.webp"
  alt="Broken Course Search"
  size={85}
/>
<ScaledImage src="/assets/img/m2-issues.png" alt="Module 2 Issues" size={100} />

We're seeing the error pop up in Sentry, but how can we use [**Seer**](https://docs.sentry.io/product/ai-in-sentry/seer/) and the [**Sentry MCP server**](https://docs.sentry.io/product/sentry-mcp) to help analyze and fix the issue quicker?

## Learning Objectives

By the end of this module, you'll know how to:

- Use **Seer**'s AI-powered debugging to automatically analyze and diagnose errors
- Take advantage of **automated fix suggestions** to resolve issues faster than manual debugging
- See how **AI can generate pull requests** with the fixes needed to resolve the issue
- Use the **Sentry MCP Server** to bring real-time Sentry context into your development environment
- Access **live issue data** and **Seer analysis** directly from your IDE or AI agentic workflow

### How Seer and MCP Will Help Us

For our course search problem, Seer will leverage:

1. **Intelligent Error Analysis**: examine the error context and understand what's going wrong across the full application
2. **Automatic Root Cause Detection**: identify the exact issue causing the search to fail
3. **Actionable Solutions**: Seer doesn't just tell you there's a problem‚Äîit shows you exactly what code to change and how to fix it
4. **Hands-Free Fixes**: When you're ready, Seer can even fix the issue and create a pull request for you, so you can focus on building features instead of debugging

### Enhanced Debugging with Sentry MCP Server

The [Sentry MCP Server](https://docs.sentry.io/product/sentry-mcp/) provides secure connectivity between your development environment and Sentry's rich debugging data. With MCP integration, you can:

- **Access Real-Time Context**: Bring live Sentry issues, traces, and logs directly into your IDE or AI agentic workflow
- **Invoke Seer Remotely**: Trigger Seer and get fix recommendations without leaving your development environment
- **Search Across Projects**: Query your entire Sentry organization for related issues and patterns
- **Streamlined Workflow**: Eliminate context switching between your code editor and Sentry dashboard

## Setting Up Sentry MCP Server

Before we dive into using Seer to analyze our course search issue, let's set up the Sentry MCP Server to enable seamless integration with your development environment.

<Steps>
  1. **Configure MCP in Your IDE**

     Install the Sentry MCP integration in your IDE (we'll be using Cursor) to enable direct communication with Sentry's debugging data and Seer analysis.
     - Visit Cursor ‚û°Ô∏è Settings ‚û°Ô∏è Tools & Integrations ‚û°Ô∏è MCP Tools
     - Select "Add Custom MCP" and add:

     ```bash
      {
        "mcpServers": {
          "sentry": {
            "url": "https://mcp.sentry.dev/mcp"
          }
        }
      }
     ```

2. **Authenticate with Sentry**

   If you've used the above configuration, you'll be automatically authenticated with OAuth.

   Once everything is complete, you should see a little green light below the icon in the MCP tools list indicating üëç You may need to choose something else from the left menu, then return here to confirm it took.

   \*Note: click to expand and see the tool calls we now have access to.

   <ScaledImage
     src="/assets/img/cursor_mcp.png"
     alt="Sentry MCP Setup"
     size={100}
   />

3. **Enable Seer Automation settings in your Sentry Project(s)**

   In Sentry, visit Project ‚û°Ô∏è Settings ‚û°Ô∏è Seer and add your repo. We'll do this for both the Frontend and Server applications.

   Here we can fine-tune the automation settings for how we want Seer to work. Scan Sentry Issues for a root cause analysis... and then? ü§ñ

   <ScaledImage
     src="/assets/img/seer-project-settings.png"
     alt="Seer Settings"
     size={100}
   />

</Steps>

Alternatively, you can use the [mcp.sentry.dev](https://mcp.sentry.dev/) web client for a simple way to configure and test the MCP server. From here you can authenticate with your Sentry organization and access a hosted MCP server for testing.

<ScaledImage src="/assets/img/sentry-mcp-web.png" alt="Seer" size={100} />

## Using Seer to Analyze the Course Search Issue

Now that we have MCP set up, let's use Seer to automatically analyze and fix our course search problem.
We can see in the configuration the available tool calls we can utilize in Cursor's chat window.

<Steps>
  1. **Query Sentry Issues via MCP**

     In your IDE's AI chat interface, use the MCP connection to query Sentry about the course search issues:

     ```
     Find project <you-project-name> in Sentry
     ```

     The MCP server will fetch live issue data from Sentry and present it directly in your development environment.

2. **Trigger Seer Analysis**

   Ask Seer to perform a root cause analysis on the search issues:

   ```
   Use Sentry Seer to analyze the root cause of the course search failures
   ```

   Seer will automatically:
   - Examine error traces across frontend and backend
   - Analyze request/response patterns
   - Identify parameter mismatches
   - Correlate timing and performance data

3. **Review Seer's Findings**

   Seer will identify that the frontend is sending a `query` parameter while the backend expects a `q` parameter. The analysis will include:
   - **Root Cause**: Parameter name mismatch between frontend (`query`) and backend (`q`)
   - **Error Location**: Frontend API service and backend search route
   - **Impact**: 100% failure rate for course search functionality
   - **Confidence**: High (based on consistent error patterns)

4. **Apply Seer's Fix Suggestions**

   Seer will provide the exact code changes needed. You can either:

   **Option A**: Apply the fix manually based on Seer's suggestions

   **Option B**: Let Seer generate a pull request with the fix

   For Option B, simply ask:

   ```
   Generate a pull request to fix the parameter mismatch issue
   ```

</Steps>

## Automated Fix with Seer

Seer's automated analysis reveals the issue and provides the exact fix needed:

<Steps>
  1. **Seer's Analysis Results**

     Seer identifies the parameter mismatch and suggests updating the frontend to use `q` instead of `query`:

     ```tsx
     // Current (broken) code:
     fetchApi<any[]>(`/search/courses?query=${encodeURIComponent(query)}`)

     // Seer's suggested fix:
     fetchApi<any[]>(`/search/courses?q=${encodeURIComponent(query)}`)
     ```

2. **Apply the Fix**

   Navigate to `/apps/frontend/src/services/api.ts` and update the search method:

   ```tsx
   search: {
     courses: (query: string) =>
       fetchApi<any[]>(`/search/courses?q=${encodeURIComponent(query)}`),
   },
   ```

3. **Verify the Fix**

   Test the course search functionality again. Seer will continue monitoring and confirm that the issue has been resolved.

</Steps>

Once this is complete, give search a try again and you should see your results!

<ScaledImage
  src="/assets/img/m2-search-success.png"
  alt="Search Fixed"
  size={100}
/>

## Next Steps with Seer and MCP

Now that you've seen how Seer and the MCP server can automatically diagnose and fix issues, here are some ways you can take this further:

- **Set up automated monitoring** to catch similar issues before they impact users
- **Configure Seer alerts** to get proactive fix suggestions for new errors
- **Integrate MCP workflows** into your daily development process for faster debugging
- **Explore Seer's advanced features** like performance optimization suggestions and security vulnerability detection
